[{"title":"OI-1","date":"2025-09-26T16:00:00.000Z","url":"/2025/09/27/OI-1/","categories":[["OI","/categories/OI/"]],"content":"Problem BackgroundAfter dropping biology, 123abc finally got free time to work on something he really interested in. Although soso always told 123abc to devote his time to concentrating in OI, 123abc refused and started searching for a girl – someone who shared his love for algorithms and late-night coding marathons, someone who wouldn’t mind debugging life’s problems with him together. But alas, life wasn’t a simple binary search. 123abc wandered through the labyrinth of social networks, his heart hoping to find a connection. Yet, every time he thought he had found “the one,” it turned out to be nothing more than a segmentation fault of expectations. When soso found out, he shook his head and said: “You could have optimized your time complexity by focusing on OI instead.” 123abc just laughed, replying: “Life isn’t always about efficiency, soso. Sometimes, you have to brute force your way to happiness.” And so, his quest continued, with the hope that one day, he’d find the perfect “runtime partner.” And, against all odds, he really found one. She wasn’t just any girl. She was smart, witty, and had a knack for solving problems – both in life and in code. Her username was “456def”, she studies in *, and their first conversation started in a team minicomp in * training, where she corrected a subtle bug in one of 123abc’s solutions. “You forgot to handle edge cases,” she said. 123abc grinned. “Thanks… maybe you can help me handle mine?” From there, it was as if their lives compiled perfectly together. They spent nights brainstorming algorithms, debugging each other’s code, and even competing in OI virtual contests. She was the quicksort to his merge sort – different approaches, but both striving for the same goal. When soso heard about their relationship, he sighed and said: “Well, at least she’s OI-compatible. I guess that’s acceptable.” But 123abc smiled and replied: “She’s more than compatible, soso. She’s my perfect runtime partner.” And for the first time, 123abc felt like his life was finally running in O(1) – fast, efficient, and filled with happiness. It’s the (1/12)-th anniversary (i.e. the 1st month) of 123abc and his girlfriend, 456def! To celebrate this, 123abc decided to go shopping with his girlfriend at the * plaza. However, as * plaza is too cheap, his girlfriend is not satisfied. (She expected to go shopping at somewhere like *.) Problem StatementFortunately, as 456def is so nice, she may sometimes be satisfied no matter how cheap her boyfriend was. As 456def is too pretty, the government decided to reform the monetary system and release banknotes with values of all integer numbers from $1$ to $M$ and print her face on the banknotes. 456def always knows her set of banknotes – let’s assume their values are $a_1, a_2, a_3, \\dots, a_N$. All those values are between $1$ and $M$ and she may possess more than one banknote of a kind. Also, the sequence of values $a_1, a_2, a_3, \\dots, a_N$ is not ordered in any way. 456def is satisfied if and only if when entering a shop, she may buy any combination of goods with total price equal to any number between $1$ and the total sum of her banknotes $a_1 + a_2 + \\dots + a_N$ without changes. As expected, 456def’s set of banknotes is changing after each purchase and also after each time her boyfriend gives her banknotes – that’s why her satisfaction is variable. There are $Q$ events. For each event $i$, $E_i$ is the type of the event ($E_i = 1$ indicates that she received banknotes from her boyfriend and $E_i = -1$ indicates that she has spent some banknotes.) $K_i$ is the number of banknotes she has received/spent. $b_{i,1}, b_{i,2}, \\dots, b_{i,K_i}$ is the banknotes she has received/spent. Your task is to determine whether she is satisfied, initially (before all events), and after each event. Note that the events are not independent and she felt satisfied when she has no money. InputThe first line contains two integers, $N$ and $M$. The second line contains $N$ integers, $a_1, a_2, \\dots, a_N$. The third line contains a single integer, $Q$. For the following $Q$ lines,Each line starts with two integers, $E_i$ and $K_i$ which are the type of the event and the number of corresponding banknotes, followed by $K_i$ integers, $b_{i,1}, b_{i,2}, \\dots, b_{i,K_i}$. OutputOn the first line, output a single integer, $S_0$, which is the satisfaction before all events. (1 for satisfied and 0 for unsatisfied) On the following $Q$ lines, output a single integer, $S_i$ which is the satisfaction after event $i$. SubtasksLet $N_c$ denote the number of 456def’s banknotes at any given moment. For all subtasks, $1 \\leq N_c \\leq 2 \\times 10^5$ $1 \\leq M \\leq 10^{12}$ $0 \\leq Q \\leq 10^5$ $1 \\leq K \\leq 5$ Subtask 1: worth 1% of the total points, $M = 1$. Subtask 2: worth 4% of the total points, $M = 2$. Subtask 3: worth 7% of the total points, $Q = 0, N \\leq 10, M \\leq 1000$. Subtask 4: worth 13% of the total points, $N_c \\leq 300, M \\leq 100, Q \\leq 100$. Subtask 5: worth 16% of the total points, $N_c \\leq 1000, Q \\leq 1000$. Subtask 6: worth 20% of the total points, $M \\leq 5000, Q \\leq 5000$. Subtask 7: worth 30% of the total points, $M \\leq 10^6$. Subtask 8: worth 9% of the total points, no additional constraints. Problem Solution:By 1234567890regis. The official solution is crap (who likes Necessary &amp; Sufficient Conditions???). I’m going to write my own solution. NO OBSERVATION SOLUTION. Call the sequence “good” if 456def is satisfied when she has this sequence of money. Denote the sum of all numbers in the sequence that is less than $x$ to be $f(x)$. Obviously to check if the sequence is good you need to check for every $a_i$, whether $f(a_i)+1 \\ge a_i$. Now we can denote $g(i) =f(a_i)+1-a_i$ and maintain it, and to check if the sequence is good, we need to query the minimum value of $g(i)$ for $1 \\le i \\le n$ and see if it is $\\ge 0$. Now on to insertion/deletion. When you try adding $a_{n+1}=x$ into the sequence, the calculation of $g(n+1)$ is trivial. But there $x$ might cause other $g$s to change. So for all $a_i$ such that $a_i \\ge x$, we must add $x$ to $g(i)$ to maintain it. And that just obviously lead to Segment Tree. And you’re done. You can discretize and set all to $0$ before all the operations. Accepted CodeIn the segment tree: tag: number of Active values in the interval mn: minimum of all Active values in the interval tree: sum of ALL values in the interval (whether active or not) lazy: lazy tag of value waiting to add to the entire interval The segment tree stores the value of $g(i)$. Let $f(i)$ be the sum of the Active numbers that is less than $i$, then $g(i)$ is defined as $f(i)+1-i$. ($i$ is the original, undiscretized value). Active means whether it is in the set or not. Everytime you want to see if the array is “good”, you query the minimum of $g(i)$ across all Active values. If it is $&lt;0$ then its bad, reason being that there exists $g(i)&lt;0$, which indicates $f(i)+1&lt;i$ so its bad. —THE END—"},{"title":"Inequality-1","date":"2025-09-23T16:00:00.000Z","url":"/2025/09/24/Inequality-1/","categories":[["Algebra","/categories/Algebra/"]],"content":"题目：已知对任意 $\\{x_i\\} (1 \\le i \\le n)$ 使得 $\\forall i, x_i &gt; 0$ 且 $\\prod_{i=1}^n x_i=1$，都有： $\\sum_{i=1}^n \\frac{1}{x_i} \\le \\sum_{i=1}^n x_i^{r(n)}$，其中 $r(n)$ 是定实数。 求 $r(n)$ 的取值范围（用 $n$ 表示）。 解答：答案： $r(n) \\in\\begin{cases}\\mathbb{R} &amp; n =1\\\\(-\\infty, -1] \\cup [n - 1, +\\infty) &amp; n \\ge 2\\end{cases}$ $n=1$ 时显然。下假设 $n \\ge 2$。 引理：若 $\\prod_{i=1}^n x_i=1$，则对任意 $\\alpha \\ge 1$，$\\sum x_i \\le \\sum x_i^{\\alpha}$。 引理证明：由 Chebyshev 不等式与均值不等式，$\\sum x_i^{\\alpha} \\ge \\frac{1}{n} (\\sum x_i^{\\alpha - 1}) \\times (\\sum x_i) \\ge (\\prod x_i^{\\alpha - 1})^\\frac{1}{n} \\times (\\sum x_i) = \\sum x_i$，证毕！ （1）先证 $r(n) \\subseteq (-\\infty, -1] \\cup [n - 1, +\\infty)$。 若 $r(n) \\ge 0$ 则取 $t$ 充分大，$x_1=t^{-(n-1)}, x_2=x_3=\\cdots=x_n=t$，则有： $t^{n-1}+(n-1) \\frac{1}{t} \\le t^{-(n-1)r(n)}+(n-1)t^{r(n)}$，因为 $r(n) \\ge 0$， $\\therefore t^{n-1} \\le 1+(n-1)t^{r(n)}$，因为 $t$ 充分大， $\\therefore r(n) \\ge n-1$。 若 $r(n) &lt; 0$ 则取 $t$ 充分大，$x_1=t^{n-1}, x_2=x_3=\\cdots=x_n=t^{-1}$，则有： $t^{-(n-1)}+(n-1)t \\le t^{(n-1)r(n)}+(n-1)t^{-r}$，因为 $r(n) &lt; 0$， $\\therefore (n-1)t \\le 1+(n-1)t^{-r}$，因为 $t$ 充分大， $\\therefore r \\le -1$。 所以 $r(n) \\subseteq (-\\infty, -1] \\cup [n - 1, +\\infty)$。 （2）再证对所有 $r(n) \\subseteq (-\\infty, -1] \\cup [n - 1, +\\infty)$，原式都成立。 若 $r(n) \\ge n-1$ 则： $\\sum \\frac{1}{x_i}$ $=\\sum \\frac{\\prod_j x_j}{x_i}$ $=x_2x_3 \\cdots x_n+x_1x_3 \\cdots x_n+\\cdots+x_1x_2 \\cdots x_{n-1}$ $=(x_2^{n-1}x_3^{n-1} \\cdots x_n^{n-1})^\\frac{1}{n-1}+(x_1^{n-1}x_3^{n-1} \\cdots x_n^{n-1})^\\frac{1}{n-1}+\\cdots+(x_1^{n-1}x_2^{n-1} \\cdots x_{n-1}^{n-1})^\\frac{1}{n-1}$ $\\le \\frac{x_2^{n-1}+x_3^{n-1}+\\cdots+x_n^{n-1}}{n-1}+\\frac{x_1^{n-1}+x_3^{n-1}+\\cdots+x_n^{n-1}}{n-1}+\\cdots+\\frac{x_1^{n-1}+x_2^{n-1}+\\cdots+x_{n-1}^{n-1}}{n-1}$ $=\\sum x_i^{n-1}$，由引理，因为 $\\prod x_i^{n-1}=1$，取 $\\alpha=\\frac{r(i)}{n-1}$，有： $\\le \\sum (x_i^{n-1})^\\alpha=\\sum x_i^{r(i)}$ 成立。 若 $r(n) \\le -1$ 则： $\\sum \\frac{1}{x_i}$ $=\\sum x_i^{-1}$，由引理，因为 $\\prod x_i^{-1}=1$，取 $\\alpha=-r(i)$，有： $\\le \\sum (x_i^{-1})^\\alpha$ $=\\sum x_i^{r(i)}$ 成立。 证毕！ $\\square$"}]