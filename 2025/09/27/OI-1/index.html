<!DOCTYPE html>
<html lang="en">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  <link rel="icon" href="/images/icon.ico">
  
  <title>OI-1 | Regis&#39;s Blog</title>
  
  <meta name="author" content="1234567890regis" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="" />
  
  <meta name="description" content="Problem BackgroundAfter dropping biology, 123abc finally got free time to work on something he really interested in. Although soso always told 123abc to devote his time to concentrating in OI, 123abc">
<meta property="og:type" content="article">
<meta property="og:title" content="OI-1">
<meta property="og:url" content="https://1234567890regis.github.io/2025/09/27/OI-1/index.html">
<meta property="og:site_name" content="Regis&#39;s Blog">
<meta property="og:description" content="Problem BackgroundAfter dropping biology, 123abc finally got free time to work on something he really interested in. Although soso always told 123abc to devote his time to concentrating in OI, 123abc">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://1234567890regis.github.io/images/icon.ico">
<meta property="article:published_time" content="2025-09-26T16:00:00.000Z">
<meta property="article:modified_time" content="2025-09-27T14:23:14.760Z">
<meta property="article:author" content="1234567890regis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://1234567890regis.github.io/images/icon.ico">
  
  <!-- 站点验证相关 -->
  
    
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.min.css" media="all"></script>
  
    <link rel="stylesheet" id="darkmode-css" href="/css/kr-color-dark.min.css" media="(prefers-color-scheme: dark)"></script>
    <script src="/js/kr-dark.min.js"></script>
  
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-eighties.min.css" media="all"></script>
  
  <link rel="stylesheet" id="fontawe-css" href="/vendors/font-awesome@4.7.0/css/font-awesome.min.css" media="all"></script>
  <link rel="stylesheet" id="nprogress-css" href="/vendors/nprogress@0.2.0/nprogress.css" media="all"></script>
  
  
  
    <link rel="stylesheet" href="/vendors/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"></script>
  
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="/vendors/jquery@3.6.0/dist/jquery.min.js"></script>
  
    <script src="/vendors/qrcode_js@1.0.0/qrcode.min.js"></script>
  
  
  <style>
    
    
  </style>
  

<meta name="generator" content="Hexo 8.0.0"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">Regis&#39;s Blog</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2><div class="title_example" style="font-size: 80px;"><span style="font-size: 80px; margin-right:25px">Regis&#39;s</span> <span style="font-size: 80px;">Blog</span></div></h2> <br>
                        <span>For Cute Little Femboys UwU</span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        

            <section class="col-md-8">

        

            <article itemscope itemtype="https://schema.org/Article">
    
    <link itemprop="mainEntityOfPage" href="https://1234567890regis.github.io/2025/09/27/OI-1/">
    <div class="kratos-hentry kratos-post-inner clearfix">
        <header class="kratos-entry-header">
            
                <h1 class="kratos-entry-title text-center" itemprop="name headline">OI-1</h1>
            
            
            <ul class="kratos-post-meta text-center">
                <li><time datetime="2025-09-26T16:00:00.000Z" itemprop="datePublished"><i class="fa fa-calendar"></i> 2025-09-27</time></li>
                <li itemprop="author" itemscope itemtype="https://schema.org/Person">
                    <i class="fa fa-user"></i> 作者 <span itemprop="name">1234567890regis</span>
                </li>
                
                    <li>
                        <i class="fa fa-edit"></i> 
                        
                        
                            ~10.44K
                        
                        字
                    </li>
                
                
                    <li>
                        <i class="fa fa-eye"></i>
                        <span id="twikoo_visitors"> </span> 次阅读
                    </li>
                
            </ul>
        </header>
        <div class="kratos-post-content">
            
            <div id="expire-alert" class="alert alert-warning hidden" role="alert">
                <div class="icon"><i class="fa fa-warning"></i></div>
                <div class="text"><p>本文最后编辑于 <time datetime="1758982994760"></time> 前，其中的内容可能需要更新。</p></div>
            </div>
            
            
            
            <hr />
            <div itemprop="articleBody"><h1 id="Problem-Background"><a href="#Problem-Background" class="headerlink" title="Problem Background"></a>Problem Background</h1><p>After dropping biology, 123abc finally got free time to work on something he really interested in. Although soso always told 123abc to devote his time to concentrating in OI, 123abc refused and started searching for a girl – someone who shared his love for algorithms and late-night coding marathons, someone who wouldn’t mind debugging life’s problems with him together.</p>
<p>But alas, life wasn’t a simple binary search.</p>
<p>123abc wandered through the labyrinth of social networks, his heart hoping to find a connection. Yet, every time he thought he had found “the one,” it turned out to be nothing more than a segmentation fault of expectations.</p>
<p>When soso found out, he shook his head and said: “You could have optimized your time complexity by focusing on OI instead.”</p>
<p>123abc just laughed, replying: “Life isn’t always about efficiency, soso. Sometimes, you have to brute force your way to happiness.”</p>
<p>And so, his quest continued, with the hope that one day, he’d find the perfect “runtime partner.”</p>
<p>And, against all odds, he really found one.</p>
<p>She wasn’t just any girl. She was smart, witty, and had a knack for solving problems – both in life and in code. Her username was “456def”, she studies in *, and their first conversation started in a team minicomp in * training, where she corrected a subtle bug in one of 123abc’s solutions.</p>
<p>“You forgot to handle edge cases,” she said. 123abc grinned. “Thanks… maybe you can help me handle mine?”</p>
<p>From there, it was as if their lives compiled perfectly together. They spent nights brainstorming algorithms, debugging each other’s code, and even competing in OI virtual contests. She was the quicksort to his merge sort – different approaches, but both striving for the same goal.</p>
<p>When soso heard about their relationship, he sighed and said: “Well, at least she’s OI-compatible. I guess that’s acceptable.”</p>
<p>But 123abc smiled and replied: “She’s more than compatible, soso. She’s my perfect runtime partner.”</p>
<p>And for the first time, 123abc felt like his life was finally running in O(1) – fast, efficient, and filled with happiness.</p>
<p>It’s the (1/12)-th anniversary (i.e. the 1st month) of 123abc and his girlfriend, 456def! To celebrate this, 123abc decided to go shopping with his girlfriend at the * plaza.</p>
<p>However, as * plaza is too cheap, his girlfriend is not satisfied.</p>
<p>(She expected to go shopping at somewhere like *.)</p>
<h1 id="Problem-Statement"><a href="#Problem-Statement" class="headerlink" title="Problem Statement"></a>Problem Statement</h1><p>Fortunately, as 456def is so nice, she may sometimes be satisfied no matter how cheap her boyfriend was. As 456def is too pretty, the government decided to reform the monetary system and release banknotes with values of all integer numbers from $1$ to $M$ and print her face on the banknotes. 456def always knows her set of banknotes – let’s assume their values are $a_1, a_2, a_3, \dots, a_N$. All those values are between $1$ and $M$ and she may possess more than one banknote of a kind. Also, the sequence of values $a_1, a_2, a_3, \dots, a_N$ is not ordered in any way. 456def is <strong>satisfied</strong> if and only if when entering a shop, she may buy any combination of goods with total price equal to any number between $1$ and the total sum of her banknotes $a_1 + a_2 + \dots + a_N$ without changes.</p>
<p>As expected, 456def’s set of banknotes is changing after each purchase and also after each time her boyfriend gives her banknotes – that’s why her satisfaction is variable. There are $Q$ events. For each event $i$, $E_i$ is the type of the event ($E_i = 1$ indicates that she received banknotes from her boyfriend and $E_i = -1$ indicates that she has spent some banknotes.) $K_i$ is the number of banknotes she has received/spent. $b_{i,1}, b_{i,2}, \dots, b_{i,K_i}$ is the banknotes she has received/spent. Your task is to determine whether she is satisfied, initially (before all events), and after each event.</p>
<p>Note that the events are not independent and she felt satisfied when she has no money.</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>The first line contains two integers, $N$ and $M$.</p>
<p>The second line contains $N$ integers, $a_1, a_2, \dots, a_N$.</p>
<p>The third line contains a single integer, $Q$.</p>
<p>For the following $Q$ lines,<br>Each line starts with two integers, $E_i$ and $K_i$ which are the type of the event and the number of corresponding banknotes, followed by $K_i$ integers, $b_{i,1}, b_{i,2}, \dots, b_{i,K_i}$.</p>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>On the first line, output a single integer, $S_0$, which is the satisfaction before all events. (1 for satisfied and 0 for unsatisfied)</p>
<p>On the following $Q$ lines, output a single integer, $S_i$ which is the satisfaction after event $i$.</p>
<h2 id="Subtasks"><a href="#Subtasks" class="headerlink" title="Subtasks"></a>Subtasks</h2><p>Let $N_c$ denote the number of 456def’s banknotes at any given moment.</p>
<p>For all subtasks,</p>
<ul>
<li>$1 \leq N_c \leq 2 \times 10^5$</li>
<li>$1 \leq M \leq 10^{12}$</li>
<li>$0 \leq Q \leq 10^5$</li>
<li>$1 \leq K \leq 5$</li>
</ul>
<p>Subtask 1: worth 1% of the total points, $M = 1$.</p>
<p>Subtask 2: worth 4% of the total points, $M = 2$.</p>
<p>Subtask 3: worth 7% of the total points, $Q = 0, N \leq 10, M \leq 1000$.</p>
<p>Subtask 4: worth 13% of the total points, $N_c \leq 300, M \leq 100, Q \leq 100$.</p>
<p>Subtask 5: worth 16% of the total points, $N_c \leq 1000, Q \leq 1000$.</p>
<p>Subtask 6: worth 20% of the total points, $M \leq 5000, Q \leq 5000$.</p>
<p>Subtask 7: worth 30% of the total points, $M \leq 10^6$.</p>
<p>Subtask 8: worth 9% of the total points, no additional constraints.</p>
<h1 id="Problem-Solution"><a href="#Problem-Solution" class="headerlink" title="Problem Solution:"></a>Problem Solution:</h1><p>By 1234567890regis.</p>
<p>The official solution is crap (who likes Necessary &amp; Sufficient Conditions???). I’m going to write my own solution. NO OBSERVATION SOLUTION.</p>
<p>Call the sequence “good” if 456def is satisfied when she has this sequence of money.</p>
<p>Denote the sum of all numbers in the sequence that is less than $x$ to be $f(x)$. Obviously to check if the sequence is good you need to check for every $a_i$, whether $f(a_i)+1 \ge a_i$. Now we can denote $g(i) =f(a_i)+1-a_i$ and maintain it, and to check if the sequence is good, we need to query the minimum value of $g(i)$ for $1 \le i \le n$ and see if it is $\ge 0$.</p>
<p>Now on to insertion/deletion. When you try adding $a_{n+1}=x$ into the sequence, the calculation of $g(n+1)$ is trivial. But there $x$ might cause other $g$s to change. So for all $a_i$ such that $a_i \ge x$, we must add $x$ to $g(i)$ to maintain it.</p>
<p>And that just obviously lead to <strong>Segment Tree</strong>. And you’re done. You can discretize and set all to $0$ before all the operations. </p>
<h1 id="Accepted-Code"><a href="#Accepted-Code" class="headerlink" title="Accepted Code"></a>Accepted Code</h1><p>In the segment tree:</p>
<ul>
<li>tag: number of Active values in the interval</li>
<li>mn: minimum of all Active values in the interval</li>
<li>tree: sum of ALL values in the interval (whether active or not)</li>
<li>lazy: lazy tag of value waiting to add to the entire interval</li>
</ul>
<p>The segment tree stores the value of $g(i)$. Let $f(i)$ be the sum of the Active numbers that is less than $i$, then $g(i)$ is defined as $f(i)+1-i$. ($i$ is the original, undiscretized value).</p>
<p>Active means whether it is in the set or not.</p>
<p>Everytime you want to see if the array is “good”, you query the minimum of $g(i)$ across all Active values. If it is $&lt;0$ then its bad, reason being that there exists $g(i)&lt;0$, which indicates $f(i)+1&lt;i$ so its bad.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> inf 0x3f3f3f3f3f3f3f3f</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(x) cerr &lt;&lt; #x &lt;&lt; <span class="string">&quot;: &quot;</span> &lt;&lt; x &lt;&lt; endl</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXN = <span class="number">8e5</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">int</span> a[MAXN], e[MAXN], k[MAXN], val[MAXN][<span class="number">7</span>], cnt, to[MAXN], n, m, q;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; disc;</span><br><span class="line">unordered_map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; mp;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lsx (2 * idx)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rsx (2 * idx + 1)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mid (l + r &gt;&gt; 1)</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">segtree</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> tree[MAXN &lt;&lt; <span class="number">2</span>], mn[MAXN &lt;&lt; <span class="number">2</span>], lazy[MAXN &lt;&lt; <span class="number">2</span>], tag[MAXN &lt;&lt; <span class="number">2</span>];</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> idx)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		tree[lsx] += (mid - l + <span class="number">1</span>) * lazy[idx];</span><br><span class="line">		tree[rsx] += (r - mid) * lazy[idx];</span><br><span class="line">		lazy[lsx] += lazy[idx];</span><br><span class="line">		lazy[rsx] += lazy[idx];</span><br><span class="line">		mn[lsx] += lazy[idx];</span><br><span class="line">		mn[rsx] += lazy[idx];</span><br><span class="line">		lazy[idx] = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> idx)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		tree[idx] = tree[lsx] + tree[rsx];</span><br><span class="line">		tag[idx] = tag[lsx] + tag[rsx];</span><br><span class="line">		<span class="keyword">if</span> (!tag[idx]) mn[idx] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (!tag[lsx]) mn[idx] = mn[rsx];</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (!tag[rsx]) mn[idx] = mn[lsx];</span><br><span class="line">		<span class="keyword">else</span> mn[idx] = <span class="built_in">min</span>(mn[lsx], mn[rsx]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> qidx, <span class="type">int</span> val, <span class="type">int</span> l = <span class="number">1</span>, <span class="type">int</span> r = cnt, <span class="type">int</span> idx = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="comment">//debug(qidx); debug(val); debug(l); debug(r); debug(idx);</span></span><br><span class="line">		<span class="keyword">if</span> (l == r) <span class="keyword">return</span> tag[idx] += val, mn[idx] = tree[idx], <span class="built_in">void</span>();</span><br><span class="line">		<span class="built_in">pushdown</span>(l, r, idx);</span><br><span class="line">		<span class="keyword">if</span> (qidx &lt;= mid) <span class="built_in">insert</span>(qidx, val, l, mid, lsx);</span><br><span class="line">		<span class="keyword">else</span> <span class="built_in">insert</span>(qidx, val, mid + <span class="number">1</span>, r, rsx);</span><br><span class="line">		<span class="built_in">pushup</span>(idx);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">change</span><span class="params">(<span class="type">int</span> ql, <span class="type">int</span> qr, <span class="type">int</span> val, <span class="type">int</span> l = <span class="number">1</span>, <span class="type">int</span> r = cnt, <span class="type">int</span> idx = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (r &lt; ql || qr &lt; l) <span class="keyword">return</span>;</span><br><span class="line">		<span class="keyword">if</span> (ql &lt;= l &amp;&amp; r &lt;= qr) <span class="keyword">return</span> tree[idx] += (r - l + <span class="number">1</span>) * val, mn[idx] += val, lazy[idx] += val, <span class="built_in">void</span>();</span><br><span class="line">		<span class="built_in">pushdown</span>(l, r, idx);</span><br><span class="line">		<span class="built_in">change</span>(ql, qr, val, l, mid, lsx);</span><br><span class="line">		<span class="built_in">change</span>(ql, qr, val, mid + <span class="number">1</span>, r, rsx);</span><br><span class="line">		<span class="built_in">pushup</span>(idx);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> ql, <span class="type">int</span> qr, <span class="type">int</span> l = <span class="number">1</span>, <span class="type">int</span> r = cnt, <span class="type">int</span> idx = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (r &lt; ql || qr &lt; l) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span> (ql &lt;= l &amp;&amp; r &lt;= qr) <span class="keyword">return</span> tree[idx];</span><br><span class="line">		<span class="built_in">pushdown</span>(l, r, idx);</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">query</span>(ql, qr, l, mid, lsx) + <span class="built_in">query</span>(ql, qr, mid + <span class="number">1</span>, r, rsx);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">dbg</span><span class="params">(<span class="type">int</span> l = <span class="number">1</span>, <span class="type">int</span> r = cnt, <span class="type">int</span> idx = <span class="number">1</span>)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">debug</span>(idx); <span class="built_in">debug</span>(l); <span class="built_in">debug</span>(r); <span class="built_in">debug</span>(tree[idx]); <span class="built_in">debug</span>(lazy[idx]); <span class="built_in">debug</span>(mn[idx]); <span class="built_in">debug</span>(tag[idx]);</span><br><span class="line">		cout &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">if</span> (l == r) <span class="keyword">return</span>;</span><br><span class="line">		<span class="built_in">dbg</span>(l, mid, lsx);</span><br><span class="line">		<span class="built_in">dbg</span>(mid + <span class="number">1</span>, r, rsx);</span><br><span class="line">	&#125;</span><br><span class="line">&#125; tr;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; a[i], disc.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">	cin &gt;&gt; q;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= q; i++) &#123;</span><br><span class="line">		cin &gt;&gt; e[i] &gt;&gt; k[i];</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= k[i]; j++) &#123;</span><br><span class="line">			cin &gt;&gt; val[i][j];</span><br><span class="line">			<span class="keyword">if</span> (e[i] == <span class="number">1</span>) disc.<span class="built_in">push_back</span>(val[i][j]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">sort</span>(disc.<span class="built_in">begin</span>(), disc.<span class="built_in">end</span>());</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i : disc)</span><br><span class="line">		<span class="keyword">if</span> (mp.<span class="built_in">find</span>(i) == mp.<span class="built_in">end</span>())</span><br><span class="line">			mp[i] = ++cnt, to[cnt] = i;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++) tr.<span class="built_in">change</span>(i, i, <span class="number">1</span> - to[i]);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">		<span class="type">int</span> x = a[i];</span><br><span class="line">		tr.<span class="built_in">insert</span>(mp[x], <span class="number">1</span>);</span><br><span class="line">		tr.<span class="built_in">change</span>(mp[x] + <span class="number">1</span>, cnt, x);</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; (tr.mn[<span class="number">1</span>] &gt;= <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>) &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= q; i++) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= k[i]; j++) &#123;</span><br><span class="line">			<span class="type">int</span> x = val[i][j];</span><br><span class="line">			tr.<span class="built_in">insert</span>(mp[x], e[i]);</span><br><span class="line">			tr.<span class="built_in">change</span>(mp[x] + <span class="number">1</span>, cnt, x * e[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; (tr.mn[<span class="number">1</span>] &gt;= <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>) &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="—THE-END—"><a href="#—THE-END—" class="headerlink" title="—THE END—"></a><strong>—THE END—</strong></h2></div>
        </div>
        
            <div class="kratos-copyright text-center clearfix">
                <h5 itemprop="copyrightNotice">本作品采用 <a rel="license nofollow" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a> 进行许可</h5>
            </div>
        
        <footer class="kratos-entry-footer clearfix">
            
                <div class="post-like-donate text-center clearfix" id="post-like-donate">
                
                
                    <a class="share" href="javascript:;"><i class="fa fa-share-alt"></i> 分享</a>
                    <div class="share-wrap" style="display: none;">
    <div class="share-group">
        <a href="javascript:;" class="share-plain qq" onclick="share('qq');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-qq"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain qzone" onclick="share('qzone');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-star"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weixin pop style-plain" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weixin"></i>
            </div>
            <div class="share-int">
                <div class="qrcode" id="wechat-qr"></div>
                <p>打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</p>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weibo" onclick="share('weibo');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weibo"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain facebook style-plain" onclick="share('facebook');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-facebook"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain twitter style-plain" onclick="share('twitter');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-twitter"></i>
            </div>
        </a>
    </div>
    <script type="text/javascript">
        $(()=>{
            new QRCode("wechat-qr", {
                text: "https://1234567890regis.github.io/2025/09/27/OI-1/",
                width: 150,
                height: 150,
                correctLevel : QRCode.CorrectLevel.H
            });
        });
        function share(dest) {
            const qqBase        = "https://connect.qq.com/widget/shareqq/index.html?";
            const weiboBase     = "https://service.weibo.com/share/share.php?";
            const qzoneBase     = "https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?";
            const facebookBase  = "https://www.facebook.com/sharer/sharer.php?";
            const twitterBase   = "https://twitter.com/intent/tweet?";
            const hostUrl       = "https://1234567890regis.github.io/2025/09/27/OI-1/";
            const title         = "「OI-1」";
            const excerpt       = `Problem BackgroundAfter dropping biology, 123abc finally got free time to work on something he really interested in. ...`;
            let _URL;
            switch (dest) {
                case "qq"       : _URL = qqBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";     break;
                case "weibo"    : _URL = weiboBase+"url="+hostUrl+"&title="+title+excerpt;                                 break;
                case "qzone"    : _URL = qzoneBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";  break;
                case "facebook" : _URL = facebookBase+"u="+hostUrl;                                                        break;
                case "twitter"  : _URL = twitterBase+"text="+title+excerpt+"&url="+hostUrl;                                break;
            }
            window.open(_URL);
        };
    </script>
</div>
                
                </div>
            
            <div class="footer-tag clearfix">
                <div class="pull-left">
                <i class="fa fa-tags"></i>
                    
                </div>
                <div class="pull-date">
                    <time datetime="2025-09-27T14:23:14.760Z" itemprop="dateModified">最后编辑：2025-09-27</time>
                </div>
            </div>
        </footer>
    </div>
    
        <nav class="navigation post-navigation clearfix" role="navigation">
            
            <div class="nav-previous clearfix">
                <a title=" Inequality-1" href="/2025/09/24/Inequality-1/">&lt; 上一篇</a>
            </div>
            
            
        </nav>
    
    
        <div class="post-comments lazy-load">
    <div id="tcomment"></div>
</div>
<script>
    var load_comm = () => {
        const init = () => {
            twikoo.init({ envId: 'https://twikoo-blond-beta.vercel.app/', el: '#tcomment' });
        }
        if (typeof twikoo === 'undefined') {
            const src = '/vendors/twikoo@1.5.11/dist/twikoo.all.min.js';
            $.getScript(src, init);
        } else {
            init();
        }
    };
</script>
<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://twikoo.js.org/">comments powered by Twikoo.</a></noscript>
    
</article>

        

            </section>

        

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="/images/icon.webp" loading="lazy" decoding="auto" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center">Blog</p>
    </div>
    <div class="site-meta">
        <a class="meta-item" href="/archives/">
            <span class="title">
                文章
            </span>
            <span class="count">
                2
            </span>
        </a>
        <a class="meta-item" href="/categories/">
            <span class="title">
                分类
            </span>
            <span class="count">
                2
            </span>
        </a>
        <a class="meta-item" href="/tags/">
            <span class="title">
                标签
            </span>
            <span class="count">
                0
            </span>
        </a>
    </div>
</aside>
            
                    <div class="sticky-area">
                
                
  <aside id="krw-categories" class="widget widget-kratos-categories clearfix">
    <h4 class="widget-title"><i class="fa fa-folder"></i>分类目录</h4>
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algebra/">Algebra</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OI/">OI</a><span class="category-list-count">1</span></li></ul>
  </aside>


            
                
            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
  <h4 class="widget-title"><i class="fa fa-file"></i>最新文章</h4>
  <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/2025/09/27/OI-1/"><i class="fa  fa-book"></i> OI-1</a>
            
          
        
          
          
            <a class="list-group-item" href="/2025/09/24/Inequality-1/"><i class="fa  fa-book"></i> Inequality-1</a>
            
          
        
      </ul>
  </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer"  >
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        <!-- Keep for compatibility -->
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <!-- New links -->
                        
                    </ul>
                    <ul class="kratos-copyright">
                        <div style="font-size: 15px">
                            <li>&copy; 2025 Regis's Blog 版权所有.</li>
                            <li>本站已运行<span id="span_dt">Loading...</span></li>
                        </div>
                        <div style="font-size: 15px">
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos:Rebirth</a></li>
                            <li>Site built with&nbsp;<i class="fa fa-heart throb" style="color:#d43f57"></i>&nbsp;by 1234567890regis.</li>
                        </div>
                        <div style="font-size: 15px">
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                            <li>Hosted on <a href="https://github.io" target="_blank">Github Pages</a></li>
                        </div>
                        <div style="font-size: 15px">
                            
                            
                        </div>
                    </ul>
                </div>
            </div>
        </div>
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fa fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fa fa-adjust"></span>
                    </div>
                
                
                
            </div>
            <div class="box gotop-box">
                <span class="fa fa-chevron-up"></span>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="/vendors/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="/vendors/nprogress@0.2.0/nprogress.js"></script>
<script>
    if (!window.kr) {
        window.kr = {};
    }
    window.kr.notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));
    window.kr.siteRoot = "/";
</script>


    <script async src="/js/candy.min.js"></script>




    <script defer src="/vendors/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="/js/kratosr.min.js"></script>
<script defer src="/js/pjax.min.js"></script>



<!-- Extra support for third-party plguins  -->


    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>
</html>